<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-12 col-sm-6">
      <% if params[:category_id].present? %>
        <h2><%= @category.name %>一覧</h2>
      <% else %>
        <h2>投稿一覧</h2>
      <% end %>
      <div class="d-flex flex-wrap">
        <% @posts.each do |post| %>
          <div class="card mx-auto mt-4 p-0 shadow-lg" style="width: 500px; background-color: gray;">
            <div class="card-body">
              <div class="row">
                <div class="col-5 m-1">
                  <!--画像-->
                  <%= attachment_image_tag post, :image, class: "post_image" %>
                </div>
                <div class="col-6">
                  <!--タイトル-->
                  <p><%= link_to post.title, post_path(post.id) %></p>
                  <!--評価-->
                  <p>
                  評価: <span id="star-rate-<%= post.id %>"></span>
                  <script>
                    // 繰り返し処理でもidを一意
                    $('#star-rate-<%= post.id %>').raty({
                      size: 36,
                      starOff:  '<%= asset_path('star-off.png') %>',
                      starOn : '<%= asset_path('star-on.png') %>',
                      starHalf: '<%= asset_path('star-half.png') %>',
                      half: true,
                      // 読み込み表示のみ
                      readOnly: true,
                      score: <%= post.rate %>,
                    });
                  </script>
                  </p>
                  <!--説明文-->
                  <p>説明： <%= post.body.truncate(20) %></p>
                  <!--投稿者-->
                  投稿者:
                  <%= link_to user_path(post.user.id) do %>
                    <%= post.user.name %><br />
                  <% end %>
                  <!--コメント数-->
                  <span>コメント件数：<%= post.post_comments.count %></span>
                  <!--いいね機能-->
                  <span id="favo_btn_<%= post.id %>">
                   <%= render 'favorites/favorite', post: post %>
                  </span>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>